<head>
  <script src='https://code.responsivevoice.org/responsivevoice.js'></script>
</head>


<template name="createrent">
  {{> addrent}}
  <hr>
  {{>showOwnPost}}
</template>

<template name="addrent">
  <div class="voice_search_productpage">
    <h2 class="ui dividing header">Create a New Rental Post</h2>
      <div class="ui form">
        <div class="field">
          <input type="text" id="userrental" disabled>
        </div>
        <button class="ui secondary basic button" data-tooltip="Click here to use speech" data-position="bottom center" id="addrentalrec"><i class="announcement icon"></i>Speak</button>
      </div>
    </div>
  <div class="rentform">
    <form class="ui form">
      <!--<h4 class="ui dividing header">Create a Post for your Rental Information</h4>-->
      <div class="inline fields">
        <div class="five wide field">
          <label>City</label>
          <select class="ui fluid dropdown" id="location">
            {{#each location in locationdata}}
            <option value="{{location.value}}">{{location.name}}</option>
            {{/each}}
          </select>
        </div>
      <div class="eleven wide field">
        <label>Street Address:</label>
        <input type="text" id="streetaddress">
      </div>
    </div>
      <div class="inline fields">
        <div class="thirteen wide field">
          <label>Available Months:</label>
          <label> From </label>
          <select class="ui fluid search dropdown" name="date-start" id="createdatestart">
            <option value="">Day</option>
            <option value="01">01</option>
            <option value="02">02</option>
            <option value="03">03</option>
            <option value="04">04</option>
            <option value="05">05</option>
            <option value="06">06</option>
            <option value="07">07</option>
            <option value="08">08</option>
            <option value="09">09</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
            <option value="21">21</option>
            <option value="22">22</option>
            <option value="23">23</option>
            <option value="24">24</option>
            <option value="25">25</option>
            <option value="26">26</option>
            <option value="27">27</option>
            <option value="28">28</option>
            <option value="29">29</option>
            <option value="30">30</option>
            <option value="31">31</option>
          </select>
          <select class="ui fluid search dropdown" name="available-month-start" id="timestart">
            <option value="">Month</option>
            <option value="01">January</option>
            <option value="02">February</option>
            <option value="03">March</option>
            <option value="04">April</option>
            <option value="05">May</option>
            <option value="06">June</option>
            <option value="07">July</option>
            <option value="08">August</option>
            <option value="09">September</option>
            <option value="10">October</option>
            <option value="11">November</option>
            <option value="12">December</option>
          </select>
          <input type="text" name="month[start-year]" id="monthstartyear" maxlength="4" placeholder="Year">
          <label>To</label>
          <select class="ui fluid search dropdown" name="date-end" id="createdateend">
            <option value="">Day</option>
            <option value="01">01</option>
            <option value="02">02</option>
            <option value="03">03</option>
            <option value="04">04</option>
            <option value="05">05</option>
            <option value="06">06</option>
            <option value="07">07</option>
            <option value="08">08</option>
            <option value="09">09</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
            <option value="21">21</option>
            <option value="22">22</option>
            <option value="23">23</option>
            <option value="24">24</option>
            <option value="25">25</option>
            <option value="26">26</option>
            <option value="27">27</option>
            <option value="28">28</option>
            <option value="29">29</option>
            <option value="30">30</option>
            <option value="31">31</option>
          </select>
          <select class="ui fluid search dropdown" name="available-month-end" id="timeend">
            <option value="">Month</option>
            <option value="01">January</option>
            <option value="02">February</option>
            <option value="03">March</option>
            <option value="04">April</option>
            <option value="05">May</option>
            <option value="06">June</option>
            <option value="07">July</option>
            <option value="08">August</option>
            <option value="09">September</option>
            <option value="10">October</option>
            <option value="11">November</option>
            <option value="12">December</option>
          </select>
          <input type="text" name="month[end-year]" id="monthendyear" maxlength="4" placeholder="Year">
      </div>
        <div class="three wide field">
          <label>Room Size:</label>
          <input type="text" id="roomsize">
        </div>
      </div>
      <div class="field">
        <label>Facilities:</label>
        <input type="text" id="facilities">
      </div>
      <div class="field">
        <label>Detailed Descriptions:</label>
        <input type="text" id="detaileddescription">
      </div>
      <div class="field">
        <label>Roommate Descriptions:</label>
        <input type="text" id="roommatedescription">
      </div>
      <div class="inline fields">
        <div class="five wide field">
          <label>Price / month:</label>
          <input type="text" id="priceM">
        </div>
      <div class="eleven wide field">
        <label>Contact information:</label>
        <input type="text" id="contactinformation">
      </div>
    </div>
    <div class="field">
      <label>Picture</label>
      <input type="file" id="rentalpic1">
      <input type="file" id="rentalpic2">
      <input type="file" id="rentalpic3">
    </div>
    <div class="inline fields">
      <img id="showrentalpic1">
      <img id="showrentalpic2">
      <img id="showrentalpic3">
    </div>
      <hr>
        <button class="ui button" id="submitrent"> submit </button>
      </form>
    </div>
</template>

<template name="showOwnPost">
  <div class="showrent">
  <h4 class="ui dividing header">Rental Posts</h4>
  {{#if currentUser}}
  <table class="table">
    <thead>
    <tr>
      <th>Location</th>
      <th>Street Address</th>
      <th>Available Months</th>
      <th>Room Size</th>
      <th>Facilities</th>
      <th>Detailed Description</th>
      <th>Roomate Description</th>
      <th>Price/month</th>
      <th>Contact information</th>
      <th>Picture</th>
      <th>Edit</th>
      <th>Delete</th>
    </tr>
    </thead>
    <tbody>
      {{#each rent in rentlist}}
          <tr>
            {{>ownpostrow rent=rent}}
          </tr>
      {{/each}}
    </tbody>
  </table>
  {{else}}
  Please log in
  {{/if}}
</div>
</template>


<template name="ownpostrow">
  {{#if isOwner rent}}
  <td>{{rent.location}}</td>
  <td>{{rent.street}}</td>
  <td>{{rent.startdate}}/{{rent.start}}/{{rent.startyear}} - {{rent.enddate}}/{{rent.end}}/{{rent.endyear}}</td>
  <td>{{rent.roomsize}}</td>
  <td>{{rent.facilities}}</td>
  <td>{{rent.detailed}}</td>
  <td>{{rent.roommate}}</td>
  <td>{{rent.price}}</td>
  <td>{{rent.contact}}</td>
  <td>
        {{#if hasPic1 rent}}
        <img src="data:image/jpeg;base64, {{rent.pic1}}" style="display:block; height:300px;width:300px;">

        {{/if}}



        {{#if hasPic2 rent}}
        <img src="data:image/jpeg;base64, {{rent.pic2}}" style="display:block; height:300px;width:300px;">
        {{/if}}

        {{#if hasPic3 rent}}
        <img src="data:image/jpeg;base64, {{rent.pic3}}" style="display:block; height:300px;width:300px;">
        {{/if}}
</td>
  <!-- Button trigger modal -->
  <td><button type="button" id="editRentPost" class="ui button" data-toggle="modal" data-target="#myModal_{{rent._id}}">Edit</button>

<!-- Modal -->
<div class="modal fade" id="myModal_{{rent._id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="myModalLabel">Edit Post</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form action="/my-handling-form-page" method="post">
          <div>
          <label for="location">Location:</label>
          <select class="form-control" id="newlocation_{{rent._id}}" value={{rent.location}}>
            {{#each location in locationdata}}
            <option>{{location.name}}</option>
            {{/each}}
          </select>
        </div>

        <div>
            <label for="streetaddress">Street Address:</label>
            <input type="text" id="newstreet_{{rent._id}}" value="{{rent.street}}">
        </div>
        <div>
            <label for="time">Available Time:</label>
            <input type="text" id="newtime_{{rent._id}}" value={{rent.time}}>
        </div>
        <div>
            <label for="roomsize">Room Size:</label>
            <input type="text" id="newsize_{{rent._id}}" value={{rent.roomsize}}>
        </div>
        <div>
            <label for="facilities">Facilities:</label>
            <input type="text" id="newfacilities_{{rent._id}}" value={{rent.facilities}}>
        </div>
        <div>
            <label for="detaileddescription">Detailed Description:</label>
            <input type="text" id="newdetail_{{rent._id}}" value={{rent.detailed}}>
        </div>
        <div>
            <label for="roommate">Roommate</label>
            <input type="text" id="newroommate_{{rent._id}}" value={{rent.roommate}}>
        </div>
        <div>
            <label for="price">Price:</label>
            <input type="text" id="newprice_{{rent._id}}" value={{rent.price}}>
        </div>
        <div>
            <label for="contact">Contact:</label>
            <input type="text" id="newcontact_{{rent._id}}" value={{rent.contact}}>
        </div>
        <div>
          <label for="picture">Picture:</label><br>
          {{#if hasPic1 rent}}
          <img id="oldrentalpic1_{{rent._id}}" src="data:image/jpeg;base64, {{rent.pic1}}" style="height:300px;width:300px;">
          {{/if}}
          <input class="newrentalpic" type="file" id="newrentalpic1_{{rent._id}}">
          <img class="shownewrentalpic" id="shownewrentalpic1_{{rent._id}}" style="height:300px;width:300px;">

          {{#if hasPic2 rent}}
          <img id="oldrentalpic2_{{rent._id}}" src="data:image/jpeg;base64, {{rent.pic2}}" style="height:300px;width:300px;">
          {{/if}}
          <input class="newrentalpic" type="file" id="newrentalpic2_{{rent._id}}">
          <img class="shownewrentalpic" id="shownewrentalpic2_{{rent._id}}" style="height:300px;width:300px;">

          {{#if hasPic3 rent}}
          <img id="oldrentalpic3_{{rent._id}}" src="data:image/jpeg;base64, {{rent.pic3}}" style="height:300px;width:300px;">
          {{/if}}
          <input class="newrentalpic" type="file" id="newrentalpic3_{{rent._id}}">
          <img class="shownewrentalpic" id="shownewrentalpic3_{{rent._id}}" style="height:300px;width:300px;">
        </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="updateRent">Save changes</button>
      </div>
    </div>
  </div>
</div>
</td>
<td><button class="ui button" id="deleteRent">Delete</button></td>
{{/if}}

</template>
