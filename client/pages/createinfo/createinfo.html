<head>
  <script src='https://code.responsivevoice.org/responsivevoice.js'></script>
</head>


<template name="createinfo">
<div class="createinfo-grid">
  <div class="ui divided grid">
    <div class="eight wide column" id="add-product">
      {{> addproduct}}
    </div>

    <div class="eight wide column" id="show-product">
      {{> showproduct}}
    </div>
    <hr>
  </div>
</div>
</template>

<template name="addproduct">
  <div class="voice_search_productpage">
      <h2 class="ui dividing header">Create a New Product</h2>
      <div class="ui form">
        <div class="field">
          <input type="text" id="usersay">
        </div>
        <button class="ui secondary basic button" data-tooltip="Click here to use speech" data-position="bottom center" id="additemrec"><i class="announcement icon"></i>Speak</button>
      </div>
    </div>

  <div class="productform">
  <form class="ui form" method="post">
      <div class="field">
        <label for="itemname">Product Name:</label>
        <input type="text" id="itemname">
      </div>
      <div class="fields">
        <div class="seven wide field">
          <label for="category">Category:</label>
            <select name="select" class="ui fluid dropdown" id="category">
              <option value="textbooks/books">Textbooks/Books</option>
              <option value="electronics">Electronics</option>
              <option value="clothes,shoes,and accessories">Clothes,Shoes,and Accessories</option>
              <option value="furniture/home">Furniture/Home</option>
              <option value="art/handcrafts">Art/Handcrafts</option>
              <option value="others">Others</option>
            </select>
          </div>
        <div class="four wide field">
          <label for="price">Price: $</label>
          <input type="text" id="price" min="0">
        </div>
        <div class="five wide field">
          <label for="condition">Condition:</label>
          <select name="select" class="ui fluid dropdown" id="condition">
            <option value="like new">like new</option>
            <option value="very good" selected>very good</option>
            <option value="good">good</option>
            <option value="acceptable">acceptable</option>
          </select>
        </div>
      </div>
      <div class="field">
        <label for="description">Please enter more detailed product description here</label>
        <textarea rows="2" id="description"></textarea>
      </div>
      <div class="field">
        <label for="productpic">Please add the picture of the product here</label>
        <input type="file" id="productpic">
      </div>
      <img id="showproductpic">
      <button class="ui button" id="addproduct" type="submit">Submit</button>
    </form>
  </div>
</template>



<template name="showproduct">
  {{#if currentUser}}
  <div class="displayproduct">
  <h2 class="ui dividing header"> View Products </h2>
  <table class="ui celled padded table">
  <thead>
    <tr>
      <th>Product Information</th>
      <!-- <th>Price</th>
      <th>Condition</th>
      <th>Category</th>
      <th>Description</th> -->
      <th>Status</th>
      <th>Update</th>
      <th>Remove</th>
    </tr>
  </thead>
  <tbody>
    {{#each p in productlist}}
      {{#if isOwner p}}
          {{> ownerproduct p=p}}
      {{/if}}
    {{/each}}
  </tbody>
  </table>
  </div>
  {{else}}
  <div class="productaccess">
    <h1>You must log in to access the information. {{> loginButtons}}</h1>
    <hr>
  </div>
  {{/if}}
</template>

<template name="productrow">
    <td>
      <h2 class="ui left aligned header"><a href="/singleitem/{{p.itemname}}">{{p.itemname}}</a></h2>
    </td>
    <td><img src="data:image/jpeg;base64, {{p.pic}}" style="display:block; max-height:300px;max-width:300px;"></td>
    <td>{{p.price}}</td>
    <td>{{p.condition}}</td>
    <td>{{p.category}}</td>
    <td>{{p.description}}</td>
</template>

<template name="ownerproduct">
  <tr id="productrow" class={{displayitem}}>
    <td>
        <h3 class="ui left aligned header"><a href="/singleitem/{{p.itemname}}">{{p.itemname}}</a></h3>
        <ul>
          <li>
            <img src="data:image/jpeg;base64, {{p.pic}}" style="display:block; max-height:300px;max-width:300px;">
          </li>
        <li>
          Price: ${{p.price}}
        </li>
        <li>
          Condition: {{p.condition}}
        </li>
        <li>
          Category: {{p.category}}
        </li>
        <li>
          Description: {{p.description}}
        </li>
      </ul>
    </td>
    <td>
      <div>
      <input type="checkbox" name="status" value="sold" id="jsstatus"><abbr title="Once an item is marked sold, it can not be marked unsold">sold</abbr><br>
    </div>

    </td>
    <td>
      <button type="button" id="enableedit" class="tiny ui button" data-toggle="modal" data-target="#myModal_{{p._id}}">
        Edit
      </button>
    <div class="modal fade" id="myModal_{{p._id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title" id="myModalLabel">Edit Product</h4>
          </div>
          <div class="modal-body">
            <form method="post" class="ui form">
              <div class="field">
                  <label for="itemname">Product Name:</label>
                  <input type="text" id="newitemname_{{p._id}}" value="{{p.itemname}}">
              </div>
              <div class="field">
                <label for="category">Category:</label>
                  <select name="select" id="newcategory" value={{p.category}}>
                      <option value="Textbooks/Books">Textbooks/Books</option>
                      <option value="Electronics">Electronics</option>
                      <option value="Clothes,Shoes,and Accessories">Clothes,Shoes,and Accessories</option>
                      <option value="Furniture/Home">Furniture/Home</option>
                      <option value="Art/Handcrafts">Art/Handcrafts</option>
                      <option value="Others">Others</option>
                    </select>
              </div>

                <div class="field">
                    <label for="price">Price: $</label>
                    <input type="number" id="newprice" value={{p.price}}>
                </div>
                <div class="field">
                  <label for="condition">Condition:</label>
                    <select name="select" id="newcondition" select={{p.condition}}>
                      <option value="likenew">like new</option>
                      <option value="very good" selected>very good</option>
                      <option value="good">good</option>
                      <option value="acceptable">acceptable</option>
                    </select>
                </div>
                <div class="field">
                  <label for="description">Please enter more detailed product description here</label>
                  <input type="text" id="newdescription" value={{p.description}}>
                </div>
              </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="ui button small" data-dismiss="modal">Close</button>
            <button type="button" class="ui button small primary" id="updateitem">Save changes</button>
          </div>
        </div>
      </div>
    </div>
  </td>
<td><span class="glyphicon glyphicon-remove-sign" aria-hidden="true"></span></td>
</tr>
</template>
